var UserName="";

function run1(){
	restore();
	document.getElementById("loginChanged").innerHTML="Welcome to SweetChat, "+UserName;
	document.addEventListener('click', delegateEvent);
}
function changeLogin()
 {
      var text2;
	  UserName=document.getElementById("login").value;
	  if(UserName!=""){
	      text2="Welcome to SweetChat, "+UserName+"!!";
	      document.getElementById("loginChanged").innerHTML=text2;
	  }
	  store(messageList);
 }
 function delegateEvent(evtObj) {
	if(evtObj.type === 'click'
		&& evtObj.target.classList.contains('button'))
		changeLogin();
}
function store(listToSave) {
	if(typeof(Storage) == "undefined") {
		alert('localStorage is not accessible');
		return;
	}
	localStorage.setItem("UserName",UserName );
	localStorage.setItem("messageList", JSON.stringify(listToSave));
}
function restore() {
	var item = localStorage.getItem("messageList");
	UserName = localStorage.getItem("UserName");
	return item && JSON.parse(item);
}

var uniqueId = function() {
	var date = Date.now();
	var random = Math.random() * Math.random();

	return Math.floor(date * random).toString();
};

var theMessage = function(text, done) {
	return {
		description:text,
		done: !!done,
		id: uniqueId()
	};
};

var messageList = [];

